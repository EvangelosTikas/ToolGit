#!/usr/bin/env bash
# git_helper - CLI wrapper for git_helper.sh

set -euo pipefail

# Find the library location relative to this script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
LIB_PATH="${SCRIPT_DIR}/git_helper.sh"

# Ensure the library exists
if [[ ! -f "$LIB_PATH" ]]; then
  echo "Error: git_helper.sh not found at $LIB_PATH" >&2
  exit 1
fi

# Source the helper functions
source "$LIB_PATH"

# If the user passes arguments, treat the first one as a function name
if [[ $# -eq 0 ]]; then
  echo "Usage: git_helper <function> [args...]"
  echo
  echo "Available functions:"
  declare -F | awk '{print "  " $3}' | grep -E "^git_" || echo "  (none found)"
  exit 0
fi

FUNC="$1"; shift

# Check if function exists
if ! declare -F "$FUNC" >/dev/null; then
  echo "Error: function '$FUNC' not found." >&2
  exit 1
fi

# Run the function with remaining args
"$FUNC" "$@"
